{% extends 'base.html' %}
{% load static %}

{% block title %}Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„Ø§Øª{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<link rel="stylesheet" href="{% static 'css/shopping.css' %}">
{% endblock %}

{% block header %}
<header class="header">
    <div class="header-content">
        <h1 class="main-title">Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„Ø§Øª</h1>
        <div class="user-info">
            <span class="user-name">{{ user.get_full_name|default:'Ú©Ø§Ø±Ø¨Ø±' }}</span>
            <form method="POST" action="{% url 'auth:logout' %}" style="display: inline;">
                {% csrf_token %}
                <button class="logout-btn" type="submit">Ø®Ø±ÙˆØ¬</button>
            </form>
        </div>
    </div>
</header>
{% endblock %}

{% block content %}
<main class="main-content">
    <div class="shopping-container">
        <!-- Cash Section -->
        <section class="product-section cash-section">
            <div class="section-header">
                <h2 class="section-title">Ø®Ø±ÛŒØ¯ Ù†Ù‚Ø¯ÛŒ</h2>
                <div class="section-icon">ğŸ’µ</div>
            </div>

            <div class="table-container">
                <table class="product-table cash-table">
                    <thead>
                        <tr>
                            <th>Ù†ÙˆØ¹ Ú©Ø§ØºØ°</th>
                            <th>Ú¯Ø±Ù…Ø§Ú˜</th>
                            <th>Ø§Ù†Ø¯Ø§Ø²Ù‡</th>
                            <th>Ø±Ù†Ú¯</th>
                            <th>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</th>
                            <th>Ù…ÙˆØ¬ÙˆØ¯ÛŒ</th>
                            <th>Ø§Ù†ØªØ®Ø§Ø¨</th>
                        </tr>
                    </thead>
                    <tbody id="cashTableBody">
                        {% for product in cash_products %}
                        <tr data-product-id="{{ product.id }}" data-product-type="cash">
                            <td>{{ product.name }}</td>
                            <td>{{ product.weight|default:'-' }}</td>
                            <td>{{ product.size|default:'-' }}</td>
                            <td>{{ product.color|default:'-' }}</td>
                            <td>{{ product.price|floatformat:0 }}</td>
                            <td>{{ product.stock }}</td>
                            <td>
                                {% if product.stock > 0 %}
                                <div class="quantity-controls">
                                    <button class="qty-btn minus-btn">-</button>
                                    <input type="number" class="qty-input" value="0" min="0" max="{{ product.stock }}">
                                    <button class="qty-btn plus-btn">+</button>
                                </div>
                                {% else %}
                                <span class="out-of-stock">Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="7" class="no-data">Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ Ù†Ù‚Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Credit Section -->
        <section class="product-section credit-section">
            <div class="section-header">
                <h2 class="section-title">Ø®Ø±ÛŒØ¯ Ù†Ø³ÛŒÙ‡</h2>
                <div class="section-icon">ğŸ“‹</div>
            </div>

            <div class="table-container">
                <table class="product-table credit-table">
                    <thead>
                        <tr>
                            <th>Ù†ÙˆØ¹ Ú©Ø§ØºØ°</th>
                            <th>Ú¯Ø±Ù…Ø§Ú˜</th>
                            <th>Ø§Ù†Ø¯Ø§Ø²Ù‡</th>
                            <th>Ø±Ù†Ú¯</th>
                            <th>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</th>
                            <th>Ù…ÙˆØ¬ÙˆØ¯ÛŒ</th>
                            <th>Ø§Ù†ØªØ®Ø§Ø¨</th>
                        </tr>
                    </thead>
                    <tbody id="creditTableBody">
                        {% for product in credit_products %}
                        <tr data-product-id="{{ product.id }}" data-product-type="credit">
                            <td>{{ product.name }}</td>
                            <td>{{ product.weight|default:'-' }}</td>
                            <td>{{ product.size|default:'-' }}</td>
                            <td>{{ product.color|default:'-' }}</td>
                            <td>{{ product.price|floatformat:0 }}</td>
                            <td>{{ product.stock }}</td>
                            <td>
                                {% if product.stock > 0 %}
                                <div class="quantity-controls">
                                    <button class="qty-btn minus-btn">-</button>
                                    <input type="number" class="qty-input" value="0" min="0" max="{{ product.stock }}">
                                    <button class="qty-btn plus-btn">+</button>
                                </div>
                                {% else %}
                                <span class="out-of-stock">Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="7" class="no-data">Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ Ù†Ø³ÛŒÙ‡ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Selected Products Summary -->
        <section class="summary-section">
            <div class="summary-header">
                <h3 class="summary-title">Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡</h3>
                <div class="summary-icon">ğŸ›’</div>
            </div>

            <div class="selected-products" id="selectedProducts">
                <p class="no-selection">Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
            </div>

            <div class="summary-actions">
                <button class="action-btn clear-btn">
                    <span class="btn-icon">ğŸ—‘ï¸</span>
                    <span class="btn-text">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨â€ŒÙ‡Ø§</span>
                </button>

                <button class="action-btn checkout-btn">
                    <span class="btn-icon">âœ…</span>
                    <span class="btn-text">Ø§Ø¯Ø§Ù…Ù‡ Ø®Ø±ÛŒØ¯</span>
                </button>
            </div>
        </section>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/shopping.js' %}"></script>
{% endblock %}