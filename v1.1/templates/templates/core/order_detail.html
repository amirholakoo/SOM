{% extends 'base.html' %}
{% load static %}

{% block title %}ğŸ“‹ Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´ {{ order.order_number }} - HomayOMS{% endblock %}

{% block extra_css %}
<style>
    .order-container {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 2rem 0;
        font-family: 'Tahoma', sans-serif;
    }

    .order-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
    }

    .order-header {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: white;
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        margin-bottom: 2rem;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 25px;
        font-weight: bold;
        display: inline-block;
        margin-bottom: 1rem;
    }

    .status-Pending { background: #ffeaa7; color: #2d3436; }
    .status-Confirmed { background: #74b9ff; color: white; }
    .status-Processing { background: #fd79a8; color: white; }
    .status-Ready { background: #00cec9; color: white; }
    .status-Delivered { background: #00b894; color: white; }
    .status-Cancelled { background: #e17055; color: white; }
    .status-Returned { background: #a29bfe; color: white; }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .info-item {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1rem;
        border-left: 4px solid #3498db;
    }

    .info-label {
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 0.5rem;
    }

    .order-item {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border-left: 5px solid #3498db;
    }

    .btn-action {
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 15px;
        font-weight: 600;
        margin: 0.25rem;
        transition: all 0.3s ease;
    }

    .btn-action:hover {
        background: linear-gradient(135deg, #2980b9, #21618c);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
    }
</style>
{% endblock %}

{% block content %}
<div class="order-container">
    <div class="container">
        <!-- Page Header -->
        <div class="order-header">
            <h1 style="margin-bottom: 1rem;">ğŸ“‹ Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯!</h1>
            <h2>{{ order.order_number }}</h2>
            <p style="margin: 0;">Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</p>
        </div>

        <div class="row">
            <!-- Order Information -->
            <div class="col-lg-8 mb-4">
                <div class="order-card">
                    <h3 style="color: #2c3e50; margin-bottom: 1.5rem;">ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÙØ§Ø±Ø´</h3>
                    
                    <!-- Status -->
                    <div class="text-center mb-3">
                        <span class="status-badge status-{{ order.status }}">
                            ğŸ“Š {{ order.get_status_display }}
                        </span>
                    </div>

                    <!-- Order Details Grid -->
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">ğŸ‘¤ Ù…Ø´ØªØ±ÛŒ:</div>
                            <div>{{ order.customer.customer_name }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">ğŸ’³ Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª:</div>
                            <div>
                                {% if order.payment_method == 'Cash' %}ğŸ’µ Ù†Ù‚Ø¯ÛŒ
                                {% elif order.payment_method == 'Terms' %}ğŸ“… Ù‚Ø³Ø·ÛŒ
                                {% elif order.payment_method == 'Bank_Transfer' %}ğŸ¦ Ø­ÙˆØ§Ù„Ù‡ Ø¨Ø§Ù†Ú©ÛŒ
                                {% elif order.payment_method == 'Check' %}ğŸ“ Ú†Ú©
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">ğŸ“… ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª:</div>
                            <div>{{ order.created_at|date:"Y/m/d H:i" }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label">ğŸ’° Ù…Ø¨Ù„Øº Ú©Ù„:</div>
                            <div style="font-weight: bold; color: #27ae60;">{{ order.final_amount|floatformat:0 }} ØªÙˆÙ…Ø§Ù†</div>
                        </div>
                    </div>

                    {% if order.delivery_address %}
                    <div class="info-item">
                        <div class="info-label">ğŸšš Ø¢Ø¯Ø±Ø³ ØªØ­ÙˆÛŒÙ„:</div>
                        <div>{{ order.delivery_address }}</div>
                    </div>
                    {% endif %}

                    {% if order.notes %}
                    <div class="info-item">
                        <div class="info-label">ğŸ“ ØªÙˆØ¶ÛŒØ­Ø§Øª:</div>
                        <div>{{ order.notes }}</div>
                    </div>
                    {% endif %}
                </div>

                <!-- Order Items -->
                <div class="order-card">
                    <h3 style="color: #2c3e50; margin-bottom: 1.5rem;">ğŸ“¦ Ø§Ù‚Ù„Ø§Ù… Ø³ÙØ§Ø±Ø´</h3>
                    
                    {% for item in order_items %}
                        <div class="order-item">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <h5 style="color: #2c3e50;">ğŸ“¦ {{ item.product.reel_number }}</h5>
                                    <p class="text-muted mb-1">ğŸ“ {{ item.product.get_location_display }}</p>
                                    <p class="text-muted mb-1">ğŸ“ {{ item.product.width }}mm Ã— {{ item.product.length }}m</p>
                                    <p class="text-muted mb-0">âš–ï¸ {{ item.product.gsm }} g/mÂ²</p>
                                </div>
                                
                                <div class="col-md-2">
                                    <div class="text-center">
                                        <small class="text-muted">ØªØ¹Ø¯Ø§Ø¯</small><br>
                                        <strong>{{ item.quantity }}</strong>
                                    </div>
                                </div>
                                
                                <div class="col-md-2">
                                    <div class="text-center">
                                        <small class="text-muted">Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</small><br>
                                        <strong>{{ item.unit_price|floatformat:0 }} Øª</strong>
                                    </div>
                                </div>
                                
                                <div class="col-md-2">
                                    <div class="text-center">
                                        <small class="text-muted">Ø¬Ù…Ø¹</small><br>
                                        <strong style="color: #27ae60;">{{ item.total_price|floatformat:0 }} Øª</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Actions Sidebar -->
            <div class="col-lg-4">
                <div class="order-card">
                    <h4 style="color: #2c3e50; margin-bottom: 1.5rem;">ğŸ¯ Ø¹Ù…Ù„ÛŒØ§Øª</h4>
                    
                    <div class="d-grid gap-2">
                        {% if user.role == 'customer' %}
                            <a href="{% url 'core:products_landing' %}" class="btn-action">
                                ğŸ›’ Ø§Ø¯Ø§Ù…Ù‡ Ø®Ø±ÛŒØ¯
                            </a>
                            
                            <a href="{% url 'accounts:customer_dashboard' %}" class="btn-action">
                                ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                            </a>
                        {% else %}
                            <a href="{% url 'core:orders_list' %}" class="btn-action">
                                ğŸ“‹ Ù„ÛŒØ³Øª Ø³ÙØ§Ø±Ø´Ø§Øª
                            </a>
                            
                            <a href="{% url 'core:admin_dashboard' %}" class="btn-action">
                                ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª
                            </a>
                        {% endif %}
                        
                        {% if can_cancel %}
                            <button class="btn-action" style="background: linear-gradient(135deg, #e74c3c, #c0392b);" 
                                    onclick="confirmCancel()">
                                âŒ Ù„ØºÙˆ Ø³ÙØ§Ø±Ø´
                            </button>
                        {% endif %}
                    </div>
                    
                    <!-- Contact Information -->
                    <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px;">
                        <h6 style="color: #2c3e50; margin-bottom: 1rem;">ğŸ“ ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h6>
                        <p style="margin: 0; font-size: 0.9rem; color: #7f8c8d;">
                            Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø§Ø´ØªÙ† Ø³ÙˆØ§Ù„ ÛŒØ§ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØºÛŒÛŒØ±Ø§ØªØŒ Ø¨Ø§ ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function confirmCancel() {
    if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ø±Ø§ Ù„ØºÙˆ Ú©Ù†ÛŒØ¯ØŸ')) {
        // Add cancel order functionality here
        alert('Ù‚Ø§Ø¨Ù„ÛŒØª Ù„ØºÙˆ Ø³ÙØ§Ø±Ø´ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯');
    }
}
</script>
{% endblock %} 